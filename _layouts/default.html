<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  </head>
  <body>
    <header class="page-header">
      <h1 class="project-name">{{ site.title }}</h1>
      <h2 class="project-tagline">{{ site.description }}</h2>
    </header>

    <nav class="site-nav">
      {% for item in site.navigation %}
        <a href="{{ item.url }}" {% if page.url == item.url %}class="active"{% endif %}>
          {{ item.title }}
        </a>
      {% endfor %}
    </nav>

    <!-- 添加搜索框 -->
    <div class="search-container">
      <div class="search-box">
        <input type="text" id="search-input" placeholder="搜索游戏...">
        <button type="button" class="search-button">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
        </button>
      </div>
      <div id="search-results"></div>
    </div>

    <main class="main-content">
      {% if page.title %}
        <div class="page-title">
          <h1>{{ page.title }}</h1>
          {% if page.description %}
            <p class="page-description">{{ page.description }}</p>
          {% endif %}
        </div>
      {% endif %}

      {{ content }}

      {% if page.comments != false %}
      <div class="comments-section">
        <h2>评论区</h2>
        <div class="comment-tips">
          <p>💡 使用 GitHub 账号登录后即可发表评论</p>
          <p>🔔 评论区支持 Markdown 格式</p>
        </div>
        <div class="giscus-container">
          <script src="https://giscus.app/client.js"
                  data-repo="chengkeshuai/chengkeshuai.github.io"
                  data-repo-id="R_kgDOLvQxXQ"
                  data-category="Announcements"
                  data-category-id="DIC_kwDOLvQxXc4Cda0K"
                  data-mapping="pathname"
                  data-strict="0"
                  data-reactions-enabled="1"
                  data-emit-metadata="0"
                  data-input-position="top"
                  data-theme="preferred_color_scheme"
                  data-loading="lazy"
                  data-lang="zh-CN"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
      {% endif %}
    </main>

    <footer class="site-footer">
      <div class="footer-content">
        <p>{{ site.title }} &copy; {{ site.time | date: '%Y' }}</p>
        <p>精心打造的网页游戏合集</p>
      </div>
    </footer>

    <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
    <script src="{{ '/assets/js/search.js' | relative_url }}"></script>
  </body>
</html>
